import java.awt.BorderLayout;

import java.io.BufferedReader;

import java.io.InputStream;
import java.io.InputStreamReader;

import java.net.ServerSocket;
import java.net.Socket;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

import javax.swing.JTextArea;
import javax.swing.JTextField;

public class QQSever extends JFrame {
	public QQSever() {
		// TODO Auto-generated constructor stub
		JTextArea jTextArea=new JTextArea();
		JPanel jPanel=new JPanel();
		String title="å°ğŸ˜";
		JButton send=new JButton("å‘é€");
		JTextField jTextField=new JTextField(30);
		JScrollPane jpPane=new JScrollPane(jTextArea);
		jPanel.add(jTextField);
		jPanel.add(send);
		jTextArea.setEnabled(false);
		
		this.setTitle(title);
		this.add(jPanel,BorderLayout.SOUTH);
		this.add(jpPane);
		this.setVisible(true);
		this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		this.setSize(550, 800);
		
		try {
			ServerSocket server=new ServerSocket(8989);
			Socket socket=server.accept();			//å»ºç«‹é“¾æ¥
			
			send.addActionListener(new SendButtonListener(jTextArea,jTextField,socket.getOutputStream()));	
			//å°†æ–‡æœ¬æ¡† è¾“å…¥æ¡† è¾“å‡ºæµæ·»åŠ åˆ°ç‚¹å‡»äº‹ä»¶	
			
			InputStream iStream=socket.getInputStream();  //å»ºç«‹è¾“å…¥æµçš„é“¾æ¥
			
			InputStreamReader inputStreamReader=new InputStreamReader(iStream);
			BufferedReader bufferedReader=new BufferedReader(inputStreamReader);
			String string=null;
			while ((string=bufferedReader.readLine())!=null) {
				jTextArea.append("å°é»„è¯´:"+string+"\r\n");
				
			}
			
		} catch (Exception e) {
			// TODO: handle exception
			e.printStackTrace();
		}
		
	}
	public static void main(String[] args) {
		QQSever sqa=new QQSever();
	}
}
